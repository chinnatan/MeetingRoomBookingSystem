<template>
  <div>
    <div class="container">
      <div class="row">
        <div class="col-md-12">
          <svg
            id="floor1"
            width="100%"
            height="100%"
            x="605"
            y="270"
            overflow="visible"
            xmlns="http://www.w3.org/2000/svg"
            xmlns:se="http://svg-edit.googlecode.com"
            xmlns:xlink="http://www.w3.org/1999/xlink"
            viewBox="0 0 600 440"
          >
            <!-- Created with SVG-edit - http://svg-edit.googlecode.com/ -->
            <g style="pointer-events:all" stroke="none" fill="#000000" stroke-width="1px">
              <title
                style="pointer-events:inherit"
                stroke="none"
                fill="#000000"
                stroke-width="1px"
              >Floor 1</title>
              <rect
                fill="#aaffff"
                stroke="#000000"
                stroke-width="0px"
                x="138"
                y="137"
                width="92"
                height="92"
                id="floor_1_service"
                fill-opacity="1"
                stroke-opacity="1"
              />
              <rect
                fill="#bfbfbf"
                stroke="#000000"
                stroke-width="0px"
                x="138"
                y="237"
                width="92"
                height="92"
                id="floor_1_m04"
                fill-opacity="1"
                stroke-opacity="1"
                v-on:click="selectRoom(text.room.m04.id, text.room.m04.name, text.room.m04.size, text.room.m04.floor, text.room.m04.path, text.room.m04.active)"
              />
              <rect
                fill="#bfbfbf"
                stroke="#000000"
                stroke-width="0px"
                x="138"
                y="337"
                width="92"
                height="92"
                id="floor_1_m03"
                fill-opacity="1"
                stroke-opacity="1"
                v-on:click="selectRoom(text.room.m03.id, text.room.m03.name, text.room.m03.size, text.room.m03.floor, text.room.m03.path, text.room.m03.active)"
              />
              <rect
                fill="#bfbfbf"
                stroke="#000000"
                stroke-width="0px"
                x="437"
                y="137"
                width="92"
                height="92"
                id="floor_1_m23"
                fill-opacity="1"
                stroke-opacity="1"
                v-on:click="selectRoom(text.room.m23.id, text.room.m23.name, text.room.m23.size, text.room.m23.floor, text.room.m23.path, text.room.m23.active)"
              />
              <rect
                fill="#bfbfbf"
                stroke="#000000"
                stroke-width="0px"
                x="437"
                y="237"
                width="92"
                height="92"
                id="floor_1_m22"
                fill-opacity="1"
                stroke-opacity="1"
                v-on:click="selectRoom(text.room.m22.id, text.room.m22.name, text.room.m22.size, text.room.m22.floor, text.room.m22.path, text.room.m22.active)"
              />
              <rect
                fill="#bfbfbf"
                stroke="#000000"
                stroke-width="0px"
                x="437"
                y="337"
                width="92"
                height="92"
                id="floor_1_m21"
                fill-opacity="1"
                stroke-opacity="1"
                v-on:click="selectRoom(text.room.m21.id, text.room.m21.name, text.room.m21.size, text.room.m21.floor, text.room.m21.path, text.room.m21.active)"
              />
              <rect
                fill="#bfbfbf"
                stroke="#000000"
                stroke-width="0px"
                x="290"
                y="250"
                width="45"
                height="45"
                fill-opacity="1"
                stroke-opacity="1"
                id="floor_1_m14"
                v-on:click="selectRoom(text.room.m14.id, text.room.m14.name, text.room.m14.size, text.room.m14.floor, text.room.m14.path, text.room.m14.active)"
              />
              <rect
                fill="#bfbfbf"
                stroke="#000000"
                stroke-width="0px"
                x="342"
                y="250"
                width="45"
                height="45"
                fill-opacity="1"
                stroke-opacity="1"
                id="floor_1_m18"
                v-on:click="selectRoom(text.room.m18.id, text.room.m18.name, text.room.m18.size, text.room.m18.floor, text.room.m18.path, text.room.m18.active)"
              />
              <rect
                fill="#bfbfbf"
                stroke="#000000"
                stroke-width="0px"
                x="290"
                y="300"
                width="45"
                height="45"
                fill-opacity="1"
                stroke-opacity="1"
                id="floor_1_m13"
                v-on:click="selectRoom(text.room.m13.id, text.room.m13.name, text.room.m13.size, text.room.m13.floor, text.room.m13.path, text.room.m13.active)"
              />
              <rect
                fill="#bfbfbf"
                stroke="#000000"
                stroke-width="0px"
                x="342"
                y="300"
                width="45"
                height="45"
                fill-opacity="1"
                stroke-opacity="1"
                id="floor_1_m17"
                v-on:click="selectRoom(text.room.m17.id, text.room.m17.name, text.room.m17.size, text.room.m17.floor, text.room.m17.path, text.room.m17.active)"
              />
              <rect
                fill="#bfbfbf"
                stroke="#000000"
                stroke-width="0px"
                x="290"
                y="350"
                width="45"
                height="45"
                fill-opacity="1"
                stroke-opacity="1"
                id="floor_1_m12"
                v-on:click="selectRoom(text.room.m12.id, text.room.m12.name, text.room.m12.size, text.room.m12.floor, text.room.m12.path, text.room.m12.active)"
              />
              <rect
                fill="#bfbfbf"
                stroke="#000000"
                stroke-width="0px"
                x="342"
                y="350"
                width="45"
                height="45"
                fill-opacity="1"
                stroke-opacity="1"
                id="floor_1_m16"
                v-on:click="selectRoom(text.room.m16.id, text.room.m16.name, text.room.m16.size, text.room.m16.floor, text.room.m16.path, text.room.m16.active)"
              />
              <rect
                fill="#bfbfbf"
                stroke="#000000"
                stroke-width="0px"
                x="138"
                y="37"
                width="92"
                height="92"
                fill-opacity="1"
                stroke-opacity="1"
                id="floor_1_111"
                v-on:click="selectRoom(text.room.room111.id, text.room.room111.name, text.room.room111.size, text.room.room111.floor, text.room.room111.path, text.room.room111.active)"
              />
              <rect
                fill="#bfbfbf"
                stroke="#000000"
                stroke-width="0px"
                x="37"
                y="37"
                width="92"
                height="92"
                fill-opacity="1"
                stroke-opacity="1"
                id="floor_1_auditorium"
                v-on:click="selectRoom(text.room.auditorium.id, text.room.auditorium.name, text.room.auditorium.size, text.room.auditorium.floor, text.room.auditorium.path, text.room.auditorium.active)"
              />
              <text
                fill="#000000"
                stroke="#000000"
                stroke-width="0px"
                stroke-dasharray="null"
                stroke-linejoin="null"
                stroke-linecap="null"
                x="184"
                y="220"
                id="txt_service"
                text-anchor="middle"
                xml:space="preserve"
                fill-opacity="1"
                stroke-opacity="1"
                v-if="text.room.service.id"
                v-text="text.room.service.name"
              />
              <text
                fill="#000000"
                stroke="#000000"
                stroke-width="0px"
                stroke-dasharray="null"
                stroke-linejoin="null"
                stroke-linecap="null"
                x="184"
                y="320"
                text-anchor="middle"
                xml:space="preserve"
                fill-opacity="1"
                stroke-opacity="1"
                id="txt_m04"
                v-if="text.room.m04.id"
                v-text="text.room.m04.name"
              />
              <text
                fill="#000000"
                stroke="#000000"
                stroke-width="0px"
                stroke-dasharray="null"
                stroke-linejoin="null"
                stroke-linecap="null"
                x="184"
                y="420"
                text-anchor="middle"
                xml:space="preserve"
                fill-opacity="1"
                stroke-opacity="1"
                id="txt_m03"
                v-if="text.room.m03.id"
                v-text="text.room.m03.name"
              />
              <text
                fill="#000000"
                stroke="#000000"
                stroke-width="0px"
                stroke-dasharray="null"
                stroke-linejoin="null"
                stroke-linecap="null"
                x="485"
                y="220"
                text-anchor="middle"
                xml:space="preserve"
                fill-opacity="1"
                stroke-opacity="1"
                id="txt_m23"
                v-if="text.room.m23.id"
                v-text="text.room.m23.name"
              />
              <text
                fill="#000000"
                stroke="#000000"
                stroke-width="0px"
                stroke-dasharray="null"
                stroke-linejoin="null"
                stroke-linecap="null"
                x="484"
                y="320"
                text-anchor="middle"
                xml:space="preserve"
                fill-opacity="1"
                stroke-opacity="1"
                id="txt_m22"
                v-if="text.room.m22.id"
                v-text="text.room.m22.name"
              />
              <text
                fill="#000000"
                stroke="#000000"
                stroke-width="0px"
                stroke-dasharray="null"
                stroke-linejoin="null"
                stroke-linecap="null"
                x="484"
                y="420"
                text-anchor="middle"
                xml:space="preserve"
                fill-opacity="1"
                stroke-opacity="1"
                id="txt_m21"
                v-if="text.room.m21.id"
                v-text="text.room.m21.name"
              />
              <text
                fill="#000000"
                stroke="#000000"
                stroke-width="0px"
                stroke-dasharray="null"
                stroke-linejoin="null"
                stroke-linecap="null"
                x="184"
                y="120"
                text-anchor="middle"
                xml:space="preserve"
                fill-opacity="1"
                stroke-opacity="1"
                id="txt_111"
                v-if="text.room.room111.id"
                v-text="text.room.room111.name"
              />
              <text
                fill="#000000"
                stroke="#000000"
                stroke-width="0px"
                stroke-dasharray="null"
                stroke-linejoin="null"
                stroke-linecap="null"
                x="83"
                y="120"
                text-anchor="middle"
                xml:space="preserve"
                fill-opacity="1"
                stroke-opacity="1"
                id="txt_auditorium"
                v-if="text.room.auditorium.id"
                v-text="text.room.auditorium.name"
              />
              <text
                fill="#000000"
                stroke="#000000"
                stroke-width="0px"
                stroke-dasharray="null"
                stroke-linejoin="null"
                stroke-linecap="null"
                x="313"
                y="290"
                text-anchor="middle"
                xml:space="preserve"
                fill-opacity="1"
                stroke-opacity="1"
                id="txt_m14"
                v-if="text.room.m14.id"
                v-text="text.room.m14.name"
              />
              <text
                fill="#000000"
                stroke="#000000"
                stroke-width="0px"
                stroke-dasharray="null"
                stroke-linejoin="null"
                stroke-linecap="null"
                x="313"
                y="390"
                text-anchor="middle"
                xml:space="preserve"
                fill-opacity="1"
                stroke-opacity="1"
                id="txt_m12"
                v-if="text.room.m12.id"
                v-text="text.room.m12.name"
              />
              <text
                fill="#000000"
                stroke="#000000"
                stroke-width="0px"
                stroke-dasharray="null"
                stroke-linejoin="null"
                stroke-linecap="null"
                x="313"
                y="340"
                text-anchor="middle"
                xml:space="preserve"
                fill-opacity="1"
                stroke-opacity="1"
                id="txt_m13"
                v-if="text.room.m13.id"
                v-text="text.room.m13.name"
              />
              <text
                fill="#000000"
                stroke="#000000"
                stroke-width="0px"
                stroke-dasharray="null"
                stroke-linejoin="null"
                stroke-linecap="null"
                x="364"
                y="290"
                text-anchor="middle"
                xml:space="preserve"
                fill-opacity="1"
                stroke-opacity="1"
                id="txt_m18"
                v-if="text.room.m18.id"
                v-text="text.room.m18.name"
              />
              <text
                fill="#000000"
                stroke="#000000"
                stroke-width="0px"
                stroke-dasharray="null"
                stroke-linejoin="null"
                stroke-linecap="null"
                x="364"
                y="390"
                text-anchor="middle"
                xml:space="preserve"
                fill-opacity="1"
                stroke-opacity="1"
                id="txt_m16"
                v-if="text.room.m16.id"
                v-text="text.room.m16.name"
              />
              <text
                fill="#000000"
                stroke="#000000"
                stroke-width="0px"
                stroke-dasharray="null"
                stroke-linejoin="null"
                stroke-linecap="null"
                x="364"
                y="340"
                text-anchor="middle"
                xml:space="preserve"
                fill-opacity="1"
                stroke-opacity="1"
                id="txt_m17"
                v-if="text.room.m17.id"
                v-text="text.room.m17.name"
              />
            </g>
          </svg>
        </div>
      </div>
    </div>
  </div>
</template>

<script>
import axios from "axios";

const axiosConfig = require("../../assets/config.json");

const HOST = axiosConfig.APIGATEWAY.HOST;
const PORT = axiosConfig.APIGATEWAY.PORT;
const API = "http://" + HOST + ":" + PORT

export default {
  name: "Floor1",
  created() {
    this.getRoomByName("Auditorium");
    this.getRoomByName("111");
    this.getRoomByName("Service");
    this.getRoomByName("M03");
    this.getRoomByName("M04");
    this.getRoomByName("M12");
    this.getRoomByName("M13");
    this.getRoomByName("M14");
    this.getRoomByName("M16");
    this.getRoomByName("M17");
    this.getRoomByName("M18");
    this.getRoomByName("M21");
    this.getRoomByName("M22");
    this.getRoomByName("M23");
  },
  data() {
    return {
      text: {
        room: {
          auditorium: {
            id: "",
            name: "",
            size: "",
            floor: "",
            path: "",
            student: "",
            professor: "",
            staff: "",
            active: ""
          },
          room111: {
            id: "",
            name: "",
            size: "",
            floor: "",
            path: "",
            student: "",
            professor: "",
            staff: "",
            active: ""
          },
          service: {
            id: "",
            name: "",
            size: "",
            floor: "",
            path: "",
            student: "",
            professor: "",
            staff: "",
            active: ""
          },
          m03: {
            id: "",
            name: "",
            size: "",
            floor: "",
            path: "",
            student: "",
            professor: "",
            staff: "",
            active: ""
          },
          m04: {
            id: "",
            name: "",
            size: "",
            floor: "",
            path: "",
            student: "",
            professor: "",
            staff: "",
            active: ""
          },
          m12: {
            id: "",
            name: "",
            size: "",
            floor: "",
            path: "",
            student: "",
            professor: "",
            staff: "",
            active: ""
          },
          m13: {
            id: "",
            name: "",
            size: "",
            floor: "",
            path: "",
            student: "",
            professor: "",
            staff: "",
            active: ""
          },
          m14: {
            id: "",
            name: "",
            size: "",
            floor: "",
            path: "",
            student: "",
            professor: "",
            staff: "",
            active: ""
          },
          m16: {
            id: "",
            name: "",
            size: "",
            floor: "",
            path: "",
            student: "",
            professor: "",
            staff: "",
            active: ""
          },
          m17: {
            id: "",
            name: "",
            size: "",
            floor: "",
            path: "",
            student: "",
            professor: "",
            staff: "",
            active: ""
          },
          m18: {
            id: "",
            name: "",
            size: "",
            floor: "",
            path: "",
            student: "",
            professor: "",
            staff: "",
            active: ""
          },
          m21: {
            id: "",
            name: "",
            size: "",
            floor: "",
            path: "",
            student: "",
            professor: "",
            staff: "",
            active: ""
          },
          m22: {
            id: "",
            name: "",
            size: "",
            floor: "",
            path: "",
            student: "",
            professor: "",
            staff: "",
            active: ""
          },
          m23: {
            id: "",
            name: "",
            size: "",
            floor: "",
            path: "",
            student: "",
            professor: "",
            staff: "",
            active: ""
          }
        }
      },
      intervalUpdate: null
    };
  },
  mounted() {
    this.intervalUpdate = setInterval(function () {
      this.updateRoomActiveAllFloor();
    }.bind(this), 60000)
  },
  beforeUpdate() {
    
  },
  updated() {
    this.updateRoomActiveAllFloor();
  },
  beforeDestroy() {
    clearInterval(this.intervalUpdate)
  },
  methods: {
    selectRoom(id, name, size, floor, path, active) {
      if (
        id != null &&
        name != null &&
        size != null &&
        floor != null &&
        path != null
      ) {
        if (active) {
          this.$parent.selectRoom(id, name, size, floor, path);
        }
      }
    },
    getRoomByName(name) {
      const path = API + "/api" + axiosConfig.PATH.getRoomByName + "/" + name;

      try {
        axios
          .get(path)
          .then(res => {
            var room = res.data;
            this.setRoomInMap(room[0].RoomName, room);
          })
          .catch(error => {
            console.log(error);
          });
      } catch (err) {
        console.log(err);
      }
    },
    setRoomInMap(name, room) {
      name = name.toLowerCase();
      if (name == "auditorium") {
        this.text.room.auditorium.id = room[0].RoomId;
        this.text.room.auditorium.name = room[0].RoomName;
        this.text.room.auditorium.size = room[0].RoomSize;
        this.text.room.auditorium.floor = room[0].RoomFloor;
        this.text.room.auditorium.path = room[0].RoomPathImage;
        this.text.room.auditorium.student = room[0].RoomPermissionStudent;
        this.text.room.auditorium.professor = room[0].RoomPermissionProfessor;
        this.text.room.auditorium.staff = room[0].RoomPermissionStaff;
        this.text.room.auditorium.active = room[0].RoomActive;
      } else if (name == "111") {
        this.text.room.room111.id = room[0].RoomId;
        this.text.room.room111.name = room[0].RoomName;
        this.text.room.room111.size = room[0].RoomSize;
        this.text.room.room111.floor = room[0].RoomFloor;
        this.text.room.room111.path = room[0].RoomPathImage;
        this.text.room.room111.student = room[0].RoomPermissionStudent;
        this.text.room.room111.professor = room[0].RoomPermissionProfessor;
        this.text.room.room111.staff = room[0].RoomPermissionStaff;
        this.text.room.room111.active = room[0].RoomActive;
      } else if (name == "service") {
        this.text.room.service.id = room[0].RoomId;
        this.text.room.service.name = room[0].RoomName;
        this.text.room.service.size = room[0].RoomSize;
        this.text.room.service.floor = room[0].RoomFloor;
        this.text.room.service.path = room[0].RoomPathImage;
        this.text.room.service.student = room[0].RoomPermissionStudent;
        this.text.room.service.professor = room[0].RoomPermissionProfessor;
        this.text.room.service.staff = room[0].RoomPermissionStaff;
        this.text.room.service.active = room[0].RoomActive;
      } else if (name == "m03") {
        this.text.room.m03.id = room[0].RoomId;
        this.text.room.m03.name = room[0].RoomName;
        this.text.room.m03.size = room[0].RoomSize;
        this.text.room.m03.floor = room[0].RoomFloor;
        this.text.room.m03.path = room[0].RoomPathImage;
        this.text.room.m03.student = room[0].RoomPermissionStudent;
        this.text.room.m03.professor = room[0].RoomPermissionProfessor;
        this.text.room.m03.staff = room[0].RoomPermissionStaff;
        this.text.room.m03.active = room[0].RoomActive;
      } else if (name == "m04") {
        this.text.room.m04.id = room[0].RoomId;
        this.text.room.m04.name = room[0].RoomName;
        this.text.room.m04.size = room[0].RoomSize;
        this.text.room.m04.floor = room[0].RoomFloor;
        this.text.room.m04.path = room[0].RoomPathImage;
        this.text.room.m04.student = room[0].RoomPermissionStudent;
        this.text.room.m04.professor = room[0].RoomPermissionProfessor;
        this.text.room.m04.staff = room[0].RoomPermissionStaff;
        this.text.room.m04.active = room[0].RoomActive;
      } else if (name == "m12") {
        this.text.room.m12.id = room[0].RoomId;
        this.text.room.m12.name = room[0].RoomName;
        this.text.room.m12.size = room[0].RoomSize;
        this.text.room.m12.floor = room[0].RoomFloor;
        this.text.room.m12.path = room[0].RoomPathImage;
        this.text.room.m12.student = room[0].RoomPermissionStudent;
        this.text.room.m12.professor = room[0].RoomPermissionProfessor;
        this.text.room.m12.staff = room[0].RoomPermissionStaff;
        this.text.room.m12.active = room[0].RoomActive;
      } else if (name == "m13") {
        this.text.room.m13.id = room[0].RoomId;
        this.text.room.m13.name = room[0].RoomName;
        this.text.room.m13.size = room[0].RoomSize;
        this.text.room.m13.floor = room[0].RoomFloor;
        this.text.room.m13.path = room[0].RoomPathImage;
        this.text.room.m13.student = room[0].RoomPermissionStudent;
        this.text.room.m13.professor = room[0].RoomPermissionProfessor;
        this.text.room.m13.staff = room[0].RoomPermissionStaff;
        this.text.room.m13.active = room[0].RoomActive;
      } else if (name == "m14") {
        this.text.room.m14.id = room[0].RoomId;
        this.text.room.m14.name = room[0].RoomName;
        this.text.room.m14.size = room[0].RoomSize;
        this.text.room.m14.floor = room[0].RoomFloor;
        this.text.room.m14.path = room[0].RoomPathImage;
        this.text.room.m14.student = room[0].RoomPermissionStudent;
        this.text.room.m14.professor = room[0].RoomPermissionProfessor;
        this.text.room.m14.staff = room[0].RoomPermissionStaff;
        this.text.room.m14.active = room[0].RoomActive;
      } else if (name == "m16") {
        this.text.room.m16.id = room[0].RoomId;
        this.text.room.m16.name = room[0].RoomName;
        this.text.room.m16.size = room[0].RoomSize;
        this.text.room.m16.floor = room[0].RoomFloor;
        this.text.room.m16.path = room[0].RoomPathImage;
        this.text.room.m16.student = room[0].RoomPermissionStudent;
        this.text.room.m16.professor = room[0].RoomPermissionProfessor;
        this.text.room.m16.staff = room[0].RoomPermissionStaff;
        this.text.room.m16.active = room[0].RoomActive;
      } else if (name == "m17") {
        this.text.room.m17.id = room[0].RoomId;
        this.text.room.m17.name = room[0].RoomName;
        this.text.room.m17.size = room[0].RoomSize;
        this.text.room.m17.floor = room[0].RoomFloor;
        this.text.room.m17.path = room[0].RoomPathImage;
        this.text.room.m17.student = room[0].RoomPermissionStudent;
        this.text.room.m17.professor = room[0].RoomPermissionProfessor;
        this.text.room.m17.staff = room[0].RoomPermissionStaff;
        this.text.room.m17.active = room[0].RoomActive;
      } else if (name == "m18") {
        this.text.room.m18.id = room[0].RoomId;
        this.text.room.m18.name = room[0].RoomName;
        this.text.room.m18.size = room[0].RoomSize;
        this.text.room.m18.floor = room[0].RoomFloor;
        this.text.room.m18.path = room[0].RoomPathImage;
        this.text.room.m18.student = room[0].RoomPermissionStudent;
        this.text.room.m18.professor = room[0].RoomPermissionProfessor;
        this.text.room.m18.staff = room[0].RoomPermissionStaff;
        this.text.room.m18.active = room[0].RoomActive;
      } else if (name == "m21") {
        this.text.room.m21.id = room[0].RoomId;
        this.text.room.m21.name = room[0].RoomName;
        this.text.room.m21.size = room[0].RoomSize;
        this.text.room.m21.floor = room[0].RoomFloor;
        this.text.room.m21.path = room[0].RoomPathImage;
        this.text.room.m21.student = room[0].RoomPermissionStudent;
        this.text.room.m21.professor = room[0].RoomPermissionProfessor;
        this.text.room.m21.staff = room[0].RoomPermissionStaff;
        this.text.room.m21.active = room[0].RoomActive;
      } else if (name == "m22") {
        this.text.room.m22.id = room[0].RoomId;
        this.text.room.m22.name = room[0].RoomName;
        this.text.room.m22.size = room[0].RoomSize;
        this.text.room.m22.floor = room[0].RoomFloor;
        this.text.room.m22.path = room[0].RoomPathImage;
        this.text.room.m22.student = room[0].RoomPermissionStudent;
        this.text.room.m22.professor = room[0].RoomPermissionProfessor;
        this.text.room.m22.staff = room[0].RoomPermissionStaff;
        this.text.room.m22.active = room[0].RoomActive;
      } else if (name == "m23") {
        this.text.room.m23.id = room[0].RoomId;
        this.text.room.m23.name = room[0].RoomName;
        this.text.room.m23.size = room[0].RoomSize;
        this.text.room.m23.floor = room[0].RoomFloor;
        this.text.room.m23.path = room[0].RoomPathImage;
        this.text.room.m23.student = room[0].RoomPermissionStudent;
        this.text.room.m23.professor = room[0].RoomPermissionProfessor;
        this.text.room.m23.staff = room[0].RoomPermissionStaff;
        this.text.room.m23.active = room[0].RoomActive;
      }
    },
    getRoomActiveById(roomId, roomActive, student, professor, staff, rectId) {
      if (roomActive) {
        if (
          JSON.parse(localStorage.getItem("user")).role.toUpperCase() ==
          "IT STUDENT"
        ) {
          if (student) {
            this.getBookingScheduleCurDateAndCurTime(roomId, rectId)
          } else {
            document.getElementById(rectId).setAttribute("fill", "#bfbfbf");
          }
        }

        if (
          JSON.parse(localStorage.getItem("user")).role.toUpperCase() ==
          "LECTURE"
        ) {
          if (professor) {
            this.getBookingScheduleCurDateAndCurTime(roomId, rectId)
          } else {
            document.getElementById(rectId).setAttribute("fill", "#bfbfbf");
          }
        }

        if (
          JSON.parse(localStorage.getItem("user")).role.toUpperCase() ==
          "STAFF"
        ) {
          if (staff) {
            this.getBookingScheduleCurDateAndCurTime(roomId, rectId)
          } else {
            document.getElementById(rectId).setAttribute("fill", "#bfbfbf");
          }
        }

        if (
          JSON.parse(localStorage.getItem("user")).role.toUpperCase() ==
          "ADMIN"
        ) {
          if (student || professor || staff) {
            this.getBookingScheduleCurDateAndCurTime(roomId, rectId)
          } else {
            document.getElementById(rectId).setAttribute("fill", "#bfbfbf");
          }
        }
      }
    },
    updateRoomActiveAllFloor() {
      this.getRoomActiveById(
        this.text.room.auditorium.id,
        this.text.room.auditorium.active,
        this.text.room.auditorium.student,
        this.text.room.auditorium.professor,
        this.text.room.auditorium.staff,
        "floor_1_auditorium"
      );
      this.getRoomActiveById(
        this.text.room.room111.id,
        this.text.room.room111.active,
        this.text.room.room111.student,
        this.text.room.room111.professor,
        this.text.room.room111.staff,
        "floor_1_111"
      );
      this.getRoomActiveById(
        this.text.room.m03.id,
        this.text.room.m03.active,
        this.text.room.m03.student,
        this.text.room.m03.professor,
        this.text.room.m03.staff,
        "floor_1_m03"
      );
      this.getRoomActiveById(
        this.text.room.m04.id,
        this.text.room.m04.active,
        this.text.room.m04.student,
        this.text.room.m04.professor,
        this.text.room.m04.staff,
        "floor_1_m04"
      );
      this.getRoomActiveById(
        this.text.room.m12.id,
        this.text.room.m12.active,
        this.text.room.m12.student,
        this.text.room.m12.professor,
        this.text.room.m12.staff,
        "floor_1_m12"
      );
      this.getRoomActiveById(
        this.text.room.m13.id,
        this.text.room.m13.active,
        this.text.room.m13.student,
        this.text.room.m13.professor,
        this.text.room.m13.staff,
        "floor_1_m13"
      );
      this.getRoomActiveById(
        this.text.room.m14.id,
        this.text.room.m14.active,
        this.text.room.m14.student,
        this.text.room.m14.professor,
        this.text.room.m14.staff,
        "floor_1_m14"
      );
      this.getRoomActiveById(
        this.text.room.m16.id,
        this.text.room.m16.active,
        this.text.room.m16.student,
        this.text.room.m16.professor,
        this.text.room.m16.staff,
        "floor_1_m16"
      );
      this.getRoomActiveById(
        this.text.room.m17.id,
        this.text.room.m17.active,
        this.text.room.m17.student,
        this.text.room.m17.professor,
        this.text.room.m17.staff,
        "floor_1_m17"
      );
      this.getRoomActiveById(
        this.text.room.m18.id,
        this.text.room.m18.active,
        this.text.room.m18.student,
        this.text.room.m18.professor,
        this.text.room.m18.staff,
        "floor_1_m18"
      );
      this.getRoomActiveById(
        this.text.room.m21.id,
        this.text.room.m21.active,
        this.text.room.m21.student,
        this.text.room.m21.professor,
        this.text.room.m21.staff,
        "floor_1_m21"
      );
      this.getRoomActiveById(
        this.text.room.m22.id,
        this.text.room.m22.active,
        this.text.room.m22.student,
        this.text.room.m22.professor,
        this.text.room.m22.staff,
        "floor_1_m22"
      );
      this.getRoomActiveById(
        this.text.room.m23.id,
        this.text.room.m23.active,
        this.text.room.m23.student,
        this.text.room.m23.professor,
        this.text.room.m23.staff,
        "floor_1_m23"
      );
    },
    getBookingScheduleCurDateAndCurTime(roomId, rectId) {
      const path = API + "/api/room/" + roomId + "/booking/time/now";

      axios
        .get(path)
        .then(res => {
          if (res.data[0] != null) {
            document.getElementById(rectId).setAttribute("fill", "red");
          } else if(res.data.message != null) {
            document.getElementById(rectId).setAttribute("fill", "#00ff00");
          }
        })
        .catch(error => {
          console.log(error)
        });
    }
  }
};
</script>

<style scoped>
rect:hover {
  cursor: pointer;
  stroke-width: 2;
  stroke: #01579b;
}

text:hover {
  cursor: pointer;
}
</style>